ARM GAS  /tmp/ccO7c7Hf.s 			page 1


   1              		.cpu cortex-m7
   2              		.eabi_attribute 28, 1
   3              		.eabi_attribute 20, 1
   4              		.eabi_attribute 21, 1
   5              		.eabi_attribute 23, 3
   6              		.eabi_attribute 24, 1
   7              		.eabi_attribute 25, 1
   8              		.eabi_attribute 26, 1
   9              		.eabi_attribute 30, 1
  10              		.eabi_attribute 34, 1
  11              		.eabi_attribute 18, 4
  12              		.file	"sdram.c"
  13              		.text
  14              	.Ltext0:
  15              		.cfi_sections	.debug_frame
  16              		.section	.text.lcd_fill_buff,"ax",%progbits
  17              		.align	1
  18              		.global	lcd_fill_buff
  19              		.arch armv7e-m
  20              		.syntax unified
  21              		.thumb
  22              		.thumb_func
  23              		.fpu fpv5-d16
  25              	lcd_fill_buff:
  26              	.LFB144:
  27              		.file 1 "common/Src/sdram.c"
   1:common/Src/sdram.c **** #include "main.h"
   2:common/Src/sdram.c **** #include "sdram.h"
   3:common/Src/sdram.c **** 
   4:common/Src/sdram.c **** #include <stdio.h>
   5:common/Src/sdram.c **** #include <string.h>
   6:common/Src/sdram.c **** 
   7:common/Src/sdram.c **** FMC_SDRAM_CommandTypeDef command;
   8:common/Src/sdram.c **** extern SDRAM_HandleTypeDef hsdram1;
   9:common/Src/sdram.c **** 
  10:common/Src/sdram.c **** void lcd_fill_buff(void)
  11:common/Src/sdram.c **** {
  28              		.loc 1 11 1 view -0
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 0
  31              		@ frame_needed = 0, uses_anonymous_args = 0
  32              		@ link register save eliminated.
  12:common/Src/sdram.c **** 	uint32_t sdram_lcd_base = SDRAM_BANK_START;
  33              		.loc 1 12 2 view .LVU1
  34              	.LVL0:
  13:common/Src/sdram.c **** 
  14:common/Src/sdram.c **** 	while(sdram_lcd_base < SDRAM_BANK_END) {
  35              		.loc 1 14 2 view .LVU2
  12:common/Src/sdram.c **** 	uint32_t sdram_lcd_base = SDRAM_BANK_START;
  36              		.loc 1 12 11 is_stmt 0 view .LVU3
  37 0000 4FF04043 		mov	r3, #-1073741824
  38              	.LVL1:
  39              	.L2:
  40              		.loc 1 14 7 is_stmt 1 view .LVU4
  41 0004 044A     		ldr	r2, .L5
  42 0006 9342     		cmp	r3, r2
  43 0008 04D8     		bhi	.L4
ARM GAS  /tmp/ccO7c7Hf.s 			page 2


  15:common/Src/sdram.c **** 		*(__IO uint16_t*)sdram_lcd_base++ = 0xFFFF;
  44              		.loc 1 15 3 view .LVU5
  45              	.LVL2:
  46              		.loc 1 15 37 is_stmt 0 view .LVU6
  47 000a 4FF6FF72 		movw	r2, #65535
  48 000e 23F8012B 		strh	r2, [r3], #1	@ movhi
  49              	.LVL3:
  50              		.loc 1 15 37 view .LVU7
  51 0012 F7E7     		b	.L2
  52              	.L4:
  16:common/Src/sdram.c **** 	}
  17:common/Src/sdram.c **** }
  53              		.loc 1 17 1 view .LVU8
  54 0014 7047     		bx	lr
  55              	.L6:
  56 0016 00BF     		.align	2
  57              	.L5:
  58 0018 EF0200C0 		.word	-1073741073
  59              		.cfi_endproc
  60              	.LFE144:
  62              		.section	.text.sdram_setup,"ax",%progbits
  63              		.align	1
  64              		.global	sdram_setup
  65              		.syntax unified
  66              		.thumb
  67              		.thumb_func
  68              		.fpu fpv5-d16
  70              	sdram_setup:
  71              	.LFB145:
  18:common/Src/sdram.c **** 
  19:common/Src/sdram.c **** 
  20:common/Src/sdram.c **** void sdram_setup()
  21:common/Src/sdram.c **** {
  72              		.loc 1 21 1 is_stmt 1 view -0
  73              		.cfi_startproc
  74              		@ args = 0, pretend = 0, frame = 8
  75              		@ frame_needed = 0, uses_anonymous_args = 0
  76 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
  77              	.LCFI0:
  78              		.cfi_def_cfa_offset 24
  79              		.cfi_offset 4, -24
  80              		.cfi_offset 5, -20
  81              		.cfi_offset 6, -16
  82              		.cfi_offset 7, -12
  83              		.cfi_offset 8, -8
  84              		.cfi_offset 14, -4
  85 0004 82B0     		sub	sp, sp, #8
  86              	.LCFI1:
  87              		.cfi_def_cfa_offset 32
  22:common/Src/sdram.c ****         __IO uint32_t tmpmrd =0;
  88              		.loc 1 22 9 view .LVU10
  89              		.loc 1 22 23 is_stmt 0 view .LVU11
  90 0006 4FF00008 		mov	r8, #0
  91 000a CDF80480 		str	r8, [sp, #4]
  23:common/Src/sdram.c ****         /* Configure a clock configuration enable command */
  24:common/Src/sdram.c ****         command.CommandMode = FMC_SDRAM_CMD_CLK_ENABLE;
  92              		.loc 1 24 9 is_stmt 1 view .LVU12
ARM GAS  /tmp/ccO7c7Hf.s 			page 3


  93              		.loc 1 24 29 is_stmt 0 view .LVU13
  94 000e 214C     		ldr	r4, .L9
  95 0010 0126     		movs	r6, #1
  96 0012 2660     		str	r6, [r4]
  25:common/Src/sdram.c ****         command.CommandTarget = FMC_SDRAM_CMD_TARGET_BANK1;
  97              		.loc 1 25 9 is_stmt 1 view .LVU14
  98              		.loc 1 25 31 is_stmt 0 view .LVU15
  99 0014 1027     		movs	r7, #16
 100 0016 6760     		str	r7, [r4, #4]
  26:common/Src/sdram.c ****         command.AutoRefreshNumber = 1;
 101              		.loc 1 26 9 is_stmt 1 view .LVU16
 102              		.loc 1 26 35 is_stmt 0 view .LVU17
 103 0018 A660     		str	r6, [r4, #8]
  27:common/Src/sdram.c ****         command.ModeRegisterDefinition = 0;
 104              		.loc 1 27 9 is_stmt 1 view .LVU18
 105              		.loc 1 27 40 is_stmt 0 view .LVU19
 106 001a C4F80C80 		str	r8, [r4, #12]
  28:common/Src/sdram.c **** 
  29:common/Src/sdram.c ****         /* Send the command */
  30:common/Src/sdram.c ****         HAL_SDRAM_SendCommand(&hsdram1, &command, SDRAM_TIMEOUT);
 107              		.loc 1 30 9 is_stmt 1 view .LVU20
 108 001e 1E4D     		ldr	r5, .L9+4
 109 0020 4FF6FF72 		movw	r2, #65535
 110 0024 2146     		mov	r1, r4
 111 0026 2846     		mov	r0, r5
 112 0028 FFF7FEFF 		bl	HAL_SDRAM_SendCommand
 113              	.LVL4:
  31:common/Src/sdram.c **** 
  32:common/Src/sdram.c ****         /* Insert 100 us minimum delay */
  33:common/Src/sdram.c ****         /* Inserted delay is equal to 1 ms due to systick time base unit (ms) */
  34:common/Src/sdram.c ****         HAL_Delay(1);
 114              		.loc 1 34 9 view .LVU21
 115 002c 3046     		mov	r0, r6
 116 002e FFF7FEFF 		bl	HAL_Delay
 117              	.LVL5:
  35:common/Src/sdram.c **** 
  36:common/Src/sdram.c ****         /* Configure a PALL (precharge all) command */
  37:common/Src/sdram.c ****         command.CommandMode = FMC_SDRAM_CMD_PALL;
 118              		.loc 1 37 9 view .LVU22
 119              		.loc 1 37 29 is_stmt 0 view .LVU23
 120 0032 0223     		movs	r3, #2
 121 0034 2360     		str	r3, [r4]
  38:common/Src/sdram.c ****         command.CommandTarget = FMC_SDRAM_CMD_TARGET_BANK1;
 122              		.loc 1 38 9 is_stmt 1 view .LVU24
 123              		.loc 1 38 31 is_stmt 0 view .LVU25
 124 0036 6760     		str	r7, [r4, #4]
  39:common/Src/sdram.c ****         command.AutoRefreshNumber = 1;
 125              		.loc 1 39 9 is_stmt 1 view .LVU26
 126              		.loc 1 39 35 is_stmt 0 view .LVU27
 127 0038 A660     		str	r6, [r4, #8]
  40:common/Src/sdram.c ****         command.ModeRegisterDefinition = 0;
 128              		.loc 1 40 9 is_stmt 1 view .LVU28
 129              		.loc 1 40 40 is_stmt 0 view .LVU29
 130 003a C4F80C80 		str	r8, [r4, #12]
  41:common/Src/sdram.c **** 
  42:common/Src/sdram.c ****         /* Send the command */
  43:common/Src/sdram.c ****         HAL_SDRAM_SendCommand(&hsdram1, &command, SDRAM_TIMEOUT);
ARM GAS  /tmp/ccO7c7Hf.s 			page 4


 131              		.loc 1 43 9 is_stmt 1 view .LVU30
 132 003e 4FF6FF72 		movw	r2, #65535
 133 0042 2146     		mov	r1, r4
 134 0044 2846     		mov	r0, r5
 135 0046 FFF7FEFF 		bl	HAL_SDRAM_SendCommand
 136              	.LVL6:
  44:common/Src/sdram.c **** 
  45:common/Src/sdram.c ****         /* Configure a Auto-Refresh command */
  46:common/Src/sdram.c ****         command.CommandMode = FMC_SDRAM_CMD_AUTOREFRESH_MODE;
 137              		.loc 1 46 9 view .LVU31
 138              		.loc 1 46 29 is_stmt 0 view .LVU32
 139 004a 0323     		movs	r3, #3
 140 004c 2360     		str	r3, [r4]
  47:common/Src/sdram.c ****         command.CommandTarget = FMC_SDRAM_CMD_TARGET_BANK1;
 141              		.loc 1 47 9 is_stmt 1 view .LVU33
 142              		.loc 1 47 31 is_stmt 0 view .LVU34
 143 004e 6760     		str	r7, [r4, #4]
  48:common/Src/sdram.c ****         command.AutoRefreshNumber = 8;
 144              		.loc 1 48 9 is_stmt 1 view .LVU35
 145              		.loc 1 48 35 is_stmt 0 view .LVU36
 146 0050 0823     		movs	r3, #8
 147 0052 A360     		str	r3, [r4, #8]
  49:common/Src/sdram.c ****         command.ModeRegisterDefinition = 0;
 148              		.loc 1 49 9 is_stmt 1 view .LVU37
 149              		.loc 1 49 40 is_stmt 0 view .LVU38
 150 0054 C4F80C80 		str	r8, [r4, #12]
  50:common/Src/sdram.c **** 
  51:common/Src/sdram.c ****         /* Send the command */
  52:common/Src/sdram.c ****         HAL_SDRAM_SendCommand(&hsdram1, &command, SDRAM_TIMEOUT);
 151              		.loc 1 52 9 is_stmt 1 view .LVU39
 152 0058 4FF6FF72 		movw	r2, #65535
 153 005c 2146     		mov	r1, r4
 154 005e 2846     		mov	r0, r5
 155 0060 FFF7FEFF 		bl	HAL_SDRAM_SendCommand
 156              	.LVL7:
  53:common/Src/sdram.c **** 
  54:common/Src/sdram.c ****         /* Program the external memory mode register */
  55:common/Src/sdram.c ****         tmpmrd = (uint32_t)SDRAM_MODEREG_BURST_LENGTH_1          |
 157              		.loc 1 55 9 view .LVU40
 158              		.loc 1 55 16 is_stmt 0 view .LVU41
 159 0064 4FF40873 		mov	r3, #544
 160 0068 0193     		str	r3, [sp, #4]
  56:common/Src/sdram.c ****                              SDRAM_MODEREG_BURST_TYPE_SEQUENTIAL   |
  57:common/Src/sdram.c ****                              SDRAM_MODEREG_CAS_LATENCY_2           |
  58:common/Src/sdram.c ****                              SDRAM_MODEREG_OPERATING_MODE_STANDARD |
  59:common/Src/sdram.c ****                              SDRAM_MODEREG_WRITEBURST_MODE_SINGLE;
  60:common/Src/sdram.c **** 
  61:common/Src/sdram.c ****         command.CommandMode = FMC_SDRAM_CMD_LOAD_MODE;
 161              		.loc 1 61 9 is_stmt 1 view .LVU42
 162              		.loc 1 61 29 is_stmt 0 view .LVU43
 163 006a 0423     		movs	r3, #4
 164 006c 2360     		str	r3, [r4]
  62:common/Src/sdram.c ****         command.CommandTarget = FMC_SDRAM_CMD_TARGET_BANK1;
 165              		.loc 1 62 9 is_stmt 1 view .LVU44
 166              		.loc 1 62 31 is_stmt 0 view .LVU45
 167 006e 6760     		str	r7, [r4, #4]
  63:common/Src/sdram.c ****         command.AutoRefreshNumber = 1;
ARM GAS  /tmp/ccO7c7Hf.s 			page 5


 168              		.loc 1 63 9 is_stmt 1 view .LVU46
 169              		.loc 1 63 35 is_stmt 0 view .LVU47
 170 0070 A660     		str	r6, [r4, #8]
  64:common/Src/sdram.c ****         command.ModeRegisterDefinition = tmpmrd;
 171              		.loc 1 64 9 is_stmt 1 view .LVU48
 172              		.loc 1 64 40 is_stmt 0 view .LVU49
 173 0072 019B     		ldr	r3, [sp, #4]
 174 0074 E360     		str	r3, [r4, #12]
  65:common/Src/sdram.c **** 
  66:common/Src/sdram.c ****         /* Send the command */
  67:common/Src/sdram.c ****         HAL_SDRAM_SendCommand(&hsdram1, &command, SDRAM_TIMEOUT);
 175              		.loc 1 67 9 is_stmt 1 view .LVU50
 176 0076 4FF6FF72 		movw	r2, #65535
 177 007a 2146     		mov	r1, r4
 178 007c 2846     		mov	r0, r5
 179 007e FFF7FEFF 		bl	HAL_SDRAM_SendCommand
 180              	.LVL8:
  68:common/Src/sdram.c **** 
  69:common/Src/sdram.c ****         /* Set the refresh rate counter */
  70:common/Src/sdram.c ****         /* (15.62 us x Freq) - 20 */
  71:common/Src/sdram.c ****         /* Set the device refresh counter */
  72:common/Src/sdram.c ****         hsdram1.Instance->SDRTR |= ((uint32_t)((1292)<< 1));
 181              		.loc 1 72 9 view .LVU51
 182              		.loc 1 72 16 is_stmt 0 view .LVU52
 183 0082 2A68     		ldr	r2, [r5]
 184              		.loc 1 72 33 view .LVU53
 185 0084 5169     		ldr	r1, [r2, #20]
 186 0086 40F61823 		movw	r3, #2584
 187 008a 0B43     		orrs	r3, r3, r1
 188 008c 5361     		str	r3, [r2, #20]
  73:common/Src/sdram.c **** }
 189              		.loc 1 73 1 view .LVU54
 190 008e 02B0     		add	sp, sp, #8
 191              	.LCFI2:
 192              		.cfi_def_cfa_offset 24
 193              		@ sp needed
 194 0090 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 195              	.L10:
 196              		.align	2
 197              	.L9:
 198 0094 00000000 		.word	command
 199 0098 00000000 		.word	hsdram1
 200              		.cfi_endproc
 201              	.LFE145:
 203              		.comm	command,16,4
 204              		.text
 205              	.Letext0:
 206              		.file 2 "/home/user/STM32Toolchain/gcc-arm-none-eabi-9-2020-q2-update-x86_64-linux/gcc-arm-none-ea
 207              		.file 3 "/home/user/STM32Toolchain/gcc-arm-none-eabi-9-2020-q2-update-x86_64-linux/gcc-arm-none-ea
 208              		.file 4 "Drivers/CMSIS/Include/core_cm7.h"
 209              		.file 5 "Drivers/CMSIS/Device/ST/STM32F7xx/Include/system_stm32f7xx.h"
 210              		.file 6 "Drivers/CMSIS/Device/ST/STM32F7xx/Include/stm32f769xx.h"
 211              		.file 7 "Drivers/STM32F7xx_HAL_Driver/Inc/stm32f7xx_hal_def.h"
 212              		.file 8 "Drivers/STM32F7xx_HAL_Driver/Inc/stm32f7xx_hal_dma.h"
 213              		.file 9 "Drivers/STM32F7xx_HAL_Driver/Inc/stm32f7xx_ll_fmc.h"
 214              		.file 10 "Drivers/STM32F7xx_HAL_Driver/Inc/stm32f7xx_hal_sdram.h"
 215              		.file 11 "Drivers/STM32F7xx_HAL_Driver/Inc/stm32f7xx_hal.h"
ARM GAS  /tmp/ccO7c7Hf.s 			page 6


 216              		.file 12 "/home/user/STM32Toolchain/gcc-arm-none-eabi-9-2020-q2-update-x86_64-linux/gcc-arm-none-e
 217              		.file 13 "/home/user/STM32Toolchain/gcc-arm-none-eabi-9-2020-q2-update-x86_64-linux/gcc-arm-none-e
 218              		.file 14 "/home/user/STM32Toolchain/gcc-arm-none-eabi-9-2020-q2-update-x86_64-linux/gcc-arm-none-e
 219              		.file 15 "/home/user/STM32Toolchain/gcc-arm-none-eabi-9-2020-q2-update-x86_64-linux/gcc-arm-none-e
ARM GAS  /tmp/ccO7c7Hf.s 			page 7


DEFINED SYMBOLS
                            *ABS*:0000000000000000 sdram.c
     /tmp/ccO7c7Hf.s:17     .text.lcd_fill_buff:0000000000000000 $t
     /tmp/ccO7c7Hf.s:25     .text.lcd_fill_buff:0000000000000000 lcd_fill_buff
     /tmp/ccO7c7Hf.s:58     .text.lcd_fill_buff:0000000000000018 $d
     /tmp/ccO7c7Hf.s:63     .text.sdram_setup:0000000000000000 $t
     /tmp/ccO7c7Hf.s:70     .text.sdram_setup:0000000000000000 sdram_setup
     /tmp/ccO7c7Hf.s:198    .text.sdram_setup:0000000000000094 $d
                            *COM*:0000000000000010 command

UNDEFINED SYMBOLS
HAL_SDRAM_SendCommand
HAL_Delay
hsdram1
